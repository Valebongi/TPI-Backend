# Configuración para Docker Profile - API Gateway
server.port=8080
spring.application.name=api-gateway

# Configuración de rutas del Gateway para Docker
# Los servicios se referencian por nombre de contenedor

# Servicio de Administración (contenedor: tpi-servicio-administracion)
spring.cloud.gateway.routes[0].id=servicio-administracion
spring.cloud.gateway.routes[0].uri=http://tpi-servicio-administracion:8080
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/admin/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=2

# Servicio de Logística (contenedor: tpi-servicio-logistica)
spring.cloud.gateway.routes[1].id=servicio-logistica
spring.cloud.gateway.routes[1].uri=http://tpi-servicio-logistica:8080
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/logistica/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=2

# Servicio de Pedidos (contenedor: tpi-servicio-pedidos)
spring.cloud.gateway.routes[2].id=servicio-pedidos
spring.cloud.gateway.routes[2].uri=http://tpi-servicio-pedidos:8080
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/pedidos/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=2

# Servicio de Geolocalización (contenedor: tpi-servicio-geolocalizacion)
spring.cloud.gateway.routes[3].id=servicio-geolocalizacion
spring.cloud.gateway.routes[3].uri=http://tpi-servicio-geolocalizacion:8080
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/geo/**
spring.cloud.gateway.routes[3].filters[0]=StripPrefix=2

# Actuator para health checks
management.endpoints.web.exposure.include=health,info,gateway,metrics
management.endpoint.health.show-details=always

# Configuración de logging optimizada para contenedores
logging.level.org.springframework.cloud.gateway=INFO
logging.level.reactor.netty=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# CORS para desarrollo con Docker
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*